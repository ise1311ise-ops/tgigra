<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <!-- Важно для Telegram WebView + безопасные области -->
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Морской бой — онлайн игра</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div id="appRoot">
    <!-- Верхняя панель (фикс) -->
    <header class="topbar">
      <button class="iconBtn" id="btnBack" title="Назад" aria-label="Назад">✕</button>
      <div class="topTitle" id="topTitle">Морской бой — онлайн игра</div>
      <button class="iconBtn" id="btnMenu" title="Меню" aria-label="Меню">⋯</button>
    </header>

    <!-- Масштабируемая сцена (чтобы ВСЁ влезало в TG без скролла) -->
    <main class="stageWrap">
      <div id="stage" class="stage">
        <!-- SCREEN: MAIN -->
        <section class="screen" id="screen-main" data-screen="main">
          <div class="paper">
            <div class="mainLayout">
              <div class="doodleLeft">
                <div class="shipSketch"></div>
              </div>

              <div class="menuCard">
                <button class="menuBtn primary" id="goOnline">Онлайн игра</button>
                <button class="menuBtn" id="goSettings">Настройки</button>
                <button class="menuBtn" id="goShare">Поделиться</button>
                <button class="menuBtn" id="goHelp">Поддержка</button>
                <div class="versionNote">v0.2 • пока без реального онлайна (макет UI под Telegram)</div>
              </div>

              <div class="doodleRight">
                <div class="lighthouseSketch"></div>
              </div>
            </div>
          </div>
        </section>

        <!-- SCREEN: PLACEMENT -->
        <section class="screen hidden" id="screen-place" data-screen="place">
          <div class="paper">
            <div class="placeHeader">
              <div class="placeTitle">Расстановка</div>
              <div class="placeControls">
                <button class="miniBtn" id="btnHome">⌂</button>
                <button class="miniBtn" id="btnRotate">Повернуть: <b id="rotLabel">Гориз.</b></button>
                <button class="miniBtn" id="btnAuto">Авто</button>
                <button class="miniBtn primary" id="btnStart" disabled>Старт</button>
              </div>
            </div>

            <div class="placeGrid">
              <!-- Поле -->
              <div class="panel">
                <div class="panelTitle">
                  <div class="bigInk">Твоё поле</div>
                  <div class="hint">Тапни корабль справа → тапни по клетке</div>
                </div>
                <div class="boardWrap">
                  <div id="myBoard" class="board"></div>
                </div>
              </div>

              <!-- Флот -->
              <div class="panel">
                <div class="panelTitle">
                  <div class="bigInk">Флот</div>
                  <div class="hint">Выбери корабль → поставь</div>
                </div>

                <div class="fleet" id="fleet"></div>

                <div class="legend">
                  <span class="dot ship"></span> корабль
                  <span class="dot block"></span> нельзя рядом
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- SCREEN: LOBBY -->
        <section class="screen hidden" id="screen-lobby" data-screen="lobby">
          <div class="paper">
            <div class="lobbyHeader">
              <div class="placeTitle">Игровой зал</div>
              <div class="lobbyControls">
                <button class="miniBtn" id="btnLobbyHome">⌂</button>
                <button class="miniBtn" id="btnChat">Чат</button>
              </div>
            </div>

            <div class="lobbyBody">
              <div class="panel">
                <div class="panelTitle">
                  <div class="bigInk">Онлайн игроки</div>
                  <div class="hint">Нажми на игрока → дуэль 1×1</div>
                </div>
                <div class="usersGrid" id="usersGrid"></div>
              </div>

              <div class="panel">
                <div class="panelTitle">
                  <div class="bigInk">Инфо</div>
                  <div class="hint">Это макет — без настоящего сервера</div>
                </div>
                <div class="infoBox">
                  <p><b>Комната общая.</b> Список слева — это <b>игроки онлайн</b>.</p>
                  <p>Чат открывается кнопкой <b>“Чат”</b> сверху.</p>
                  <p>Дальше можно подключить Firebase/WebSocket — UI уже готов.</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Chat drawer -->
          <div class="drawer hidden" id="chatDrawer" aria-hidden="true">
            <div class="drawerCard">
              <div class="drawerTop">
                <div class="bigInk">Чат</div>
                <button class="miniBtn" id="btnChatClose">✕</button>
              </div>
              <div class="chatLog" id="chatLog"></div>
              <div class="chatInputRow">
                <input id="chatInput" class="chatInput" placeholder="Сообщение..." />
                <button id="chatSend" class="miniBtn primary">↵</button>
              </div>
            </div>
          </div>
        </section>

        <!-- SCREEN: DUEL -->
        <section class="screen hidden" id="screen-duel" data-screen="duel">
          <div class="paper">
            <div class="duelHeader">
              <div class="placeTitle" id="duelTitle">Дуэль 1×1</div>
              <div class="duelControls">
                <button class="miniBtn" id="btnDuelBack">← Назад</button>
              </div>
            </div>

            <div class="duelBody">
              <div class="panel">
                <div class="panelTitle">
                  <div class="bigInk">Твоё поле</div>
                  <div class="hint">твои корабли уже стоят</div>
                </div>
                <div class="boardWrap">
                  <div id="duelMyBoard" class="board"></div>
                </div>
              </div>

              <div class="panel">
                <div class="panelTitle">
                  <div class="bigInk">Поле противника</div>
                  <div class="hint">тапни клетку, чтобы “выстрелить”</div>
                </div>
                <div class="boardWrap">
                  <div id="duelEnemyBoard" class="board"></div>
                </div>

                <div class="shotsInfo" id="shotsInfo">Ход: ты</div>
              </div>
            </div>
          </div>
        </section>

        <!-- MODALS: Settings/Share/Help -->
        <div class="modal hidden" id="modal">
          <div class="modalCard">
            <div class="modalTop">
              <div class="bigInk" id="modalTitle">Окно</div>
              <button class="miniBtn" id="modalClose">✕</button>
            </div>
            <div class="modalBody" id="modalBody"></div>
            <div class="modalBottom">
              <button class="miniBtn primary" id="modalOk">Ок</button>
            </div>
          </div>
        </div>

      </div><!-- /stage -->
    </main>
  </div>

  <script src="game.js"></script>
</body>
</html>